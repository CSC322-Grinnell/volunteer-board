<!DOCTYPE html>
<html>
<head>
<style>
table {
    border-collapse: collapse;
    width: 100%;
}

th, td {
    text-align: left;
    padding: 8px;
}

tr:nth-child(even){background-color: #f2f2f2}

th {
    background-color: #4CAF50;
    color: white;
}
</style>
</head>

<div class="input">
<p id="notice"><%= notice %></p>
<div class=margin-sides>
<h1>Events</h1>


<p><br></p>

<%= month_calendar events: @events do |date, events| %>
  <%= date.strftime("%e") %>

  <% events.each do |event| %>
    <div>
      <a href="/events/<%=event.id%>"><%= event.name %> <br />
      <%=event.start_time.strftime("%l:%M%p")%>-<%=event.end_time.strftime("%l:%M%p")%></a>
    </div>
  <% end %>
<% end %>
</tr>
<br>

<h3> Upcoming </h3>

<table>
    <tr>
      <th>Title</th>
      <th>Description</th>
      <th>Start time</th>
      <th>End time</th>
      <th>Number of volunteers needed</th>
      <th>Location</th>
      <th>Contact phone</th>
      <th>Contact email</th>
      <th colspan="3"></th>
    </tr>

  <tbody>
    <% (@events.sort_by {|event| event.start_time}).each do |event| %>
    <% if DateTime.current <= event.start_time and event.start_time <= DateTime.current + 14.days %>
      <tr>
        <td><%= event.name %></td>
        <td><%= event.description %></td>
        <td><%= event.start_time.strftime("%A") %>,
            <%= event.start_time.strftime("%B") %>
            <%= event.start_time.day %>,
            <%= event.start_time.year %>,
            <%= event.start_time.strftime("%I") %>:<%= event.start_time.strftime("%M") %>
            <%= event.start_time.strftime("%p") %>
        <td><%= event.end_time.strftime("%A") %>,
            <%= event.end_time.strftime("%B") %>
            <%= event.end_time.day %>,
            <%= event.end_time.year %>,
            <%= event.end_time.strftime("%I") %>:<%= event.end_time.strftime("%M") %>
            <%= event.end_time.strftime("%p") %>
        <td><%= event.num_vols %></td>
        <td><%= event.location %></td>
        <td><%= event.contact_phone %></td>
        <td><%= event.contact_email %></td>
        <td><%= link_to 'View', event %></td>
      </tr>
    <% end %>
    <% end %>
  </tbody>
</table>

<br>
<% if organization_signed_in? %>
  <%= link_to 'New Event', new_event_path %>
<% end %> 
</div>
</div>